---
import { getEditionNumber } from "../utils";

const editions = await Astro.glob('./*.md');
const numToUrlMap: Map<string, string> = new Map();

for (const edition of editions) {
  const num = getEditionNumber(edition.file)
  if (typeof num === 'number') {
    numToUrlMap.set(`${num}`, edition.url!);
  }
}


const { editionNumber } = Astro.params;

if (typeof editionNumber !== 'string') return Astro.redirect('/');

const url = numToUrlMap.get(editionNumber);
if (!url) return Astro.redirect('/');

return Astro.redirect(url);
---
